<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css} "/>

</head>
<body>
			
	<div th:replace="frags::header"></div>
	<div class="container">
		<div class="row">
			<div class="col-12 text-end">
				<a class="btn btn-success my-5 fw-bold" href="/ingredienti">Pagina ingredienti</a>
				<a sec:authorize="hasAuthority('ADMIN')" class="btn btn-warning my-5 text-white fw-bold" href="pizze/create">Aggiungi pizza</a>
			</div>
			<div class="col-12 d-flex flex-wrap">
				<div class="text-center col-12">
					<h3 th:if="${pizze.isEmpty()}">Non ci sono pizze disponibili</h3>
				</div>
				<div class="card d-flex m-2 " style="width: 18rem;"
					 th:each="pizza : ${pizze}"
				 >			
					<a th:href="@{/pizza/{id}(id=${pizza.id})}" class="text-decoration-none text-black">					
					  <img class="card-img-top "  height="200px" th:src="${pizza.photo}" alt="Card image cap">
					  	<div class="card-body d-flex flex-column justify-content-between" >
						    <h3 class="card-text" >[[${pizza.name}]]</h3>
						    <p class="card-text">[[${pizza.description}]]</p>
						    <div class="text-end">							
				   				<span >[[${pizza.price}]]â‚¬</span>
							</div>
							<div class="d-flex justify-content-end mt-2" sec:authorize="hasAuthority('ADMIN')">
								<div class="me-5">									
									<a th:href="@{/pizza/edit/{id} (id=${pizza.id})}" class="text-decoration-none text-black btn btn-outline-success btn-sm ">Edit</a>
								</div>
								<div>									
									<form method="POST" th:action="@{/pizza/delete/{id} (id = ${pizza.id})}" onsubmit="return confirm('Sei sicuro di voler cancellare?')">
										<button class="btn btn-danger btn-sm">Delete</button>
									</form>								
								</div>
							</div>
				 	 	</div>
					</a>
				</div>
			</div>
		</div>
	</div>
	
</body>
</html>